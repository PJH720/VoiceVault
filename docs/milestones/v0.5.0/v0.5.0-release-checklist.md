# VoiceVault v0.5.0 — Release Checklist

> Target Date: TBD
> Release Manager: Jae-hyun Park

---

## 1. Pre-Release: Version Sync

Ensure all version numbers match:

- [ ] `plugin/manifest.json` → `"version": "0.5.0"`
- [ ] `plugin/package.json` → `"version": "0.5.0"`
- [ ] `pyproject.toml` → `version = "0.5.0"`
- [ ] `backend/src/api/app.py` → FastAPI `version="0.5.0"`
- [ ] `frontend/package.json` → `"version": "0.5.0"`

---

## 2. Build Verification

### 2.1 Backend

```bash
# Lint
ruff check backend/src/ --fix
ruff format backend/src/

# Tests
PYTHONPATH=backend uv run python -m pytest tests/ -v --ignore=tests/stress

# Type check
mypy backend/src/ --ignore-missing-imports
```

- [ ] Ruff lint passes (0 errors)
- [ ] All tests pass
- [ ] No critical mypy errors

### 2.2 Frontend

```bash
cd frontend
pnpm type-check     # TypeScript strict mode
pnpm lint            # ESLint
pnpm test            # Vitest unit tests
pnpm build           # Production build
```

- [ ] Type check passes (0 errors)
- [ ] Lint passes
- [ ] All tests pass
- [ ] Build succeeds

### 2.3 Plugin

```bash
cd plugin
npx tsc --noEmit     # Type check
npm run build        # esbuild → main.js
```

- [ ] Type check passes (0 errors)
- [ ] Build produces `main.js`
- [ ] `main.js` + `manifest.json` + `styles.css` are the release artifacts

### 2.4 API Contract

```bash
make gen-openapi     # Regenerate OpenAPI schema
make gen-types       # Regenerate TypeScript types (frontend + plugin)
git diff --exit-code docs/openapi.json frontend/src/types/api.generated.ts
```

- [ ] OpenAPI schema is up to date
- [ ] TypeScript types match schema

---

## 3. Testing Verification

- [ ] Backend: `pytest tests/unit/ -v` — all pass
- [ ] Backend: `pytest tests/integration/ -v` — all pass
- [ ] Frontend: `pnpm test` — all pass
- [ ] Plugin: `npx tsc --noEmit` — no errors
- [ ] Security audit: ADR-003 checklist 14/14 pass

---

## 4. Security Checks

- [ ] `cd plugin && npm audit` → 0 HIGH/CRITICAL vulnerabilities
- [ ] `cd frontend && pnpm audit` → no production vulnerabilities
- [ ] No hardcoded API keys in codebase
- [ ] `.env.example` updated with all new env vars

---

## 5. Documentation

- [ ] `CLAUDE.md` updated with v0.5.0 changes
- [ ] `README.md` reflects Next.js frontend (not Streamlit)
- [ ] ADR-001, ADR-002, ADR-003 finalized
- [ ] Test plan document exists
- [ ] Performance benchmark document exists
- [ ] Security audit report exists

---

## 6. Git & Release

### 6.1 Create Release Branch

```bash
git checkout main
git pull origin main
git merge --no-ff feature/v0.4.0-f3-streamlit-strategy
```

### 6.2 Tag & Release

```bash
git tag -a v0.5.0 -m "v0.5.0: Obsidian Plugin scaffold, RAG/Export frontend, Vault integration"
git push origin main --tags
```

### 6.3 GitHub Release

```bash
gh release create v0.5.0 \
  plugin/main.js \
  plugin/manifest.json \
  plugin/styles.css \
  --title "v0.5.0 — Obsidian Plugin MVP" \
  --generate-notes
```

### 6.4 Release Notes Template

```markdown
## VoiceVault v0.5.0

### Highlights
- Obsidian Plugin scaffold with health check and settings
- RAG Search page in Next.js frontend
- Obsidian Markdown export page
- Plugin authentication middleware
- Vault integration refactoring (VaultAdapter)

### Plugin
- `manifest.json`, `main.js`, `styles.css` for Obsidian installation
- Settings: Backend URL, API Key, export options
- HTTP client with retry and error handling

### Frontend
- RAG Search page: natural language query, date/category filters
- Export page: multi-select recordings, Markdown preview, download

### Backend
- Plugin CORS origins (app://obsidian.md)
- /api/v1/health endpoint
- PluginAuthMiddleware (Bearer token)
- VaultAdapter with standardized frontmatter

### Docs
- ADR-001: Plugin-Backend boundary
- ADR-002: Data ownership (Vault vs DB)
- ADR-003: Security & sandboxing
- Test plan, performance benchmark, security audit
```

---

## 7. Post-Release Verification

- [ ] GitHub Release page shows correct assets
- [ ] Plugin can be installed manually in Obsidian (copy `main.js`, `manifest.json`, `styles.css` to vault `.obsidian/plugins/voicevault/`)
- [ ] Plugin loads without errors in Obsidian
- [ ] Frontend builds and runs correctly
- [ ] Backend starts and serves API
- [ ] Health check works from plugin
