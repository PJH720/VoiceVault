# User Guide

VoiceVault의 모든 기능을 상세히 안내합니다.

---

## 사용 시나리오

### 대학생의 하루

```
08:00  녹음 시작 🎙️
09:00  미적분학 강의       → 📚 강의 노트 자동 생성
10:30  친구와 카페 대화     → 👥 대화 기록 자동 생성
13:00  물리학 강의          → 📚 강의 노트 자동 생성
15:00  도서관 혼자 공부     → 💡 아이디어 메모 자동 생성
18:00  팀 프로젝트 회의     → 📋 회의록 자동 생성
22:00  녹음 종료 🛑

→ AI가 자동으로 5개의 구조화된 노트를 생성!
```

---

## 1. 녹음 (Recording)

### 녹음 시작

1. **Recording** 페이지 이동
2. **"Start Recording"** 클릭
3. 브라우저 마이크 권한 허용
4. 녹음 중 표시:
   - 🔴 녹음 인디케이터 (경과 시간 표시)
   - 실시간 전사 텍스트 표시
   - 1분 요약 카드 자동 생성

### 녹음 중지

- **"Stop Recording"** 클릭
- 또는 최대 녹음 시간(설정 가능) 도달 시 자동 중지
- 중지 후 자동으로 분류 & 요약 프로세스 시작

### 녹음 일시정지 (Pause)

- **"Pause"** 클릭으로 일시정지
- 다시 **"Resume"** 클릭하면 이어서 녹음
- 일시정지 구간은 타임라인에 회색으로 표시

---

## 2. 실시간 전사 (Transcription)

### 실시간 표시
- 녹음 중 화면 하단에 전사 텍스트가 실시간 스트리밍
- 각 문장에 타임스탬프 표시: `[00:03:42] 오늘 강의에서는 미적분의...`
- 신뢰도가 낮은 구간은 `⚠️` 표시

### 지원 언어
- 한국어 (기본)
- 영어
- 다국어 혼합 인식 (Whisper 자동 감지)

### 설정 가능 옵션

| 옵션 | 설명 | 기본값 |
|------|------|--------|
| `WHISPER_MODEL` | 모델 크기 | `base` |
| `WHISPER_LANGUAGE` | 인식 언어 | `auto` |
| Streaming interval | 전사 업데이트 간격 | 500ms |

---

## 3. 자동 요약 (Summarization)

### 3.1 1분 단위 요약

매 60초마다 자동으로 트리거됩니다.

**입력**: 최근 1분간 전사 텍스트 + 이전 맥락 (500 토큰)

**출력 형식**:
```json
{
  "minute_index": 3,
  "timestamp": "00:03:00 - 00:04:00",
  "summary": "미분의 정의와 극한의 개념 설명. 엡실론-델타 정의 소개.",
  "keywords": ["미분", "극한", "엡실론-델타"],
  "speakers": ["교수"],
  "confidence": 0.94
}
```

### 3.2 1시간 통합 요약

계층적 압축 방식으로 토큰을 80% 절감합니다.

```
Level 1: 60개 × 1분 요약 (각 ~150 토큰)     = ~9,000 토큰
    ↓ (LLM 압축)
Level 2: 6개 × 10분 요약 (각 ~300 토큰)      = ~1,800 토큰
    ↓ (LLM 압축)
Level 3: 1개 × 1시간 요약 (~600 토큰)         = ~600 토큰
```

### 3.3 세션 전체 요약

녹음 종료 시 모든 1시간 요약을 통합하여 최종 문서 생성.

---

## 4. 자동 분류 (Classification)

### 분류 프로세스

녹음 종료 → 전체 분석 시작:

1. 모든 1분 요약의 화자/주제/키워드 분석
2. 시맨틱 클러스터링 (유사한 구간 그룹핑)
3. 사용자 정의 템플릿 규칙 매칭
4. Zero-shot 분류 (Claude/Ollama)
5. 결과에 따라 각 구간을 적절한 템플릿으로 매핑

### 기본 분류 카테고리

| 카테고리 | 트리거 조건 | 아이콘 |
|---------|-----------|--------|
| **강의 노트** | "교수", "과목명", 일대다 발화 패턴 | 📚 |
| **친구 대화** | 비공식 어투, 다대다 발화 | 👥 |
| **회의록** | "안건", "결정", 공식 어투 | 📋 |
| **아이디어 메모** | 혼잣말, 단발성, "생각해보니" | 💡 |
| **기타** | 분류 불확실 (신뢰도 < 0.7) | 📝 |

### 분류 결과 확인

- **Classification** 페이지에서 결과 확인
- 각 세그먼트의 시작/종료 시간, 분류 카테고리, 신뢰도 표시
- 잘못된 분류는 수동으로 수정 가능 (드롭다운에서 변경)

---

## 5. 크로스 경계 구간 검색

### 사용 방법

녹음이 여러 시간에 걸쳐 있어도, 시간 경계를 무시하고 원하는 구간만 추출할 수 있습니다.

**예시**: 00:40:00 ~ 01:20:00 구간이 필요한 경우

1. **Summaries** 페이지 → 타임라인 뷰
2. 시작점(00:40)과 끝점(01:20) 드래그 또는 직접 입력
3. **"Extract & Summarize"** 클릭
4. 해당 구간의 1분 요약 40개를 자동 수집 → 재요약
5. 새로운 요약 문서 생성

### 내부 동작

시스템 내부적으로 1시간 단위로 파일을 분할하지만, 사용자에게는 **연속된 하나의 녹음**으로 보입니다. 크로스 경계 검색 시 양쪽 파일에서 해당 구간의 요약을 자동 추출합니다.

---

## 6. Markdown 내보내기 (Export)

### 내보내기 형식

분류된 각 세그먼트가 독립 `.md` 파일로 생성됩니다.

**강의 노트 예시** (`2026-02-10_미적분학_강의.md`):

```markdown
---
title: "[미적분학] 강의 - 2026-02-10"
date: 2026-02-10T09:00:00Z
category: lecture
duration: "01:30:00"
speakers: ["교수"]
keywords: ["미분", "극한", "연속성"]
confidence: 0.94
source: voicevault
---

# 미적분학 강의 - 2026-02-10

## 핵심 개념
- 미분의 정의: 순간 변화율
- 엡실론-델타 극한 정의
- 연속 함수의 성질

## 주요 내용

### 1. 극한의 정의 (09:00-09:25)
(AI 요약 내용)

### 2. 미분 공식 유도 (09:25-10:00)
(AI 요약 내용)

## 질의응답
- Q: 엡실론은 어떤 값인가요?
- A: 임의의 양수로, 원하는 만큼 작게 잡을 수 있습니다.

## 다음 시간 예고
- 적분의 기초
```

### 내보내기 옵션

| 옵션 | 설명 |
|------|------|
| **개별 파일** | 분류된 세그먼트별 .md 파일 |
| **통합 파일** | 하루 전체 녹음을 하나의 .md로 |
| **ZIP 다운로드** | 모든 파일을 압축하여 다운로드 |
| **원본 전사 포함** | 요약과 함께 전체 전사본도 포함 |

---

## 7. 설정 (Settings)

### 설정 페이지에서 조정 가능한 항목

| 설정 | 설명 | 기본값 |
|------|------|--------|
| STT Provider | Whisper Local / API | Local |
| Whisper Model | base / small / turbo / large | base |
| LLM Provider | Claude / Ollama | Ollama |
| Auto-classify | 녹음 종료 시 자동 분류 | ON |
| Summary interval | 요약 트리거 간격(초) | 60 |
| Export format | MD / JSON / TXT | MD |
| Language | 인식 언어 | Auto |
| Max recording hours | 최대 연속 녹음 시간 | 24h |

---

## 다음 단계

- [Template System](Template-System) - 분류 템플릿 커스터마이징
- [API Reference](API-Reference) - 프로그래밍 방식 접근
- [FAQ & Troubleshooting](FAQ-&-Troubleshooting) - 문제 해결
